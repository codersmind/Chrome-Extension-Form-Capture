<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Capture Debug Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        form { border: 1px solid #ccc; padding: 20px; margin: 20px 0; border-radius: 5px; }
        input, textarea, select { margin: 5px; padding: 8px; width: 200px; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 3px; cursor: pointer; }
        button:hover { background: #0056b3; }
        .debug { background: #f8f9fa; padding: 10px; margin: 10px 0; border-radius: 3px; }
    </style>
</head>
<body>
    <h1>üîç Form Capture Extension Debug Test</h1>
    
    <div class="debug">
        <h3>Debug Instructions:</h3>
        <ol>
            <li>Load the extension in Chrome (chrome://extensions/)</li>
            <li>Open Chrome DevTools (F12)</li>
            <li>Check the Console tab for "Form Capture Extension" messages</li>
            <li>Submit the forms below and watch the console</li>
            <li>Check the extension popup/sidepanel for captured data</li>
        </ol>
    </div>

    <form id="contact-form" action="/contact" method="POST">
        <h2>üìù Contact Form</h2>
        <div>
            <label for="name">Name:</label><br>
            <input type="text" id="name" name="name" required>
        </div>
        <div>
            <label for="email">Email:</label><br>
            <input type="email" id="email" name="email" required>
        </div>
        <div>
            <label for="message">Message:</label><br>
            <textarea id="message" name="message" rows="4" required></textarea>
        </div>
        <div>
            <label>
                <input type="checkbox" name="newsletter" value="yes">
                Subscribe to newsletter
            </label>
        </div>
        <button type="submit">Submit Contact Form</button>
    </form>

    <form id="login-form" action="/login" method="POST">
        <h2>üîê Login Form</h2>
        <div>
            <label for="username">Username:</label><br>
            <input type="text" id="username" name="username" required>
        </div>
        <div>
            <label for="password">Password:</label><br>
            <input type="password" id="password" name="password" required>
        </div>
        <div>
            <label>
                <input type="radio" name="remember" value="yes">
                Remember me
            </label>
        </div>
        <button type="submit">Login</button>
    </form>

    <form id="search-form" action="/search" method="GET">
        <h2>üîç Search Form</h2>
        <div>
            <label for="query">Search Query:</label><br>
            <input type="text" id="query" name="q" required>
        </div>
        <div>
            <label for="category">Category:</label><br>
            <select id="category" name="category">
                <option value="all">All</option>
                <option value="web">Web</option>
                <option value="images">Images</option>
                <option value="videos">Videos</option>
            </select>
        </div>
        <button type="submit">Search</button>
    </form>

    <div class="debug">
        <h3>Expected Console Output:</h3>
        <pre>
Form Capture Extension: Content script loaded on [URL]
Form Capture Extension: Initializing form capture
Form Capture Extension: Extension enabled? true
Form Capture Extension: Found 3 forms to attach listeners to
Form Capture Extension: Attaching listener to form: contact-form
Form Capture Extension: Attaching listener to form: login-form
Form Capture Extension: Attaching listener to form: search-form
        </pre>
    </div>

    <script>
        // Add dynamic form after 3 seconds
        setTimeout(() => {
            const dynamicForm = document.createElement('form');
            dynamicForm.id = 'dynamic-form';
            dynamicForm.action = '/dynamic';
            dynamicForm.method = 'POST';
            dynamicForm.innerHTML = `
                <h2>‚ö° Dynamic Form (Added after page load)</h2>
                <div>
                    <label for="dynamic-input">Dynamic Input:</label><br>
                    <input type="text" id="dynamic-input" name="dynamic-input" required>
                </div>
                <button type="submit">Submit Dynamic Form</button>
            `;
            document.body.appendChild(dynamicForm);
            console.log('Dynamic form added!');
        }, 3000);

        // Test form submissions
        document.addEventListener('submit', (e) => {
            console.log('Form submitted:', e.target.id || e.target.name || 'unnamed');
        });
    </script>
</body>
</html>
